import{_ as n,Y as s,Z as a,a2 as p}from"./framework-d651fda7.js";const t={},e=p(`<h1 id="opencv-python教程-读取图像、显示、写入图像-imread-imshow-imwrite-waitkey" tabindex="-1"><a class="header-anchor" href="#opencv-python教程-读取图像、显示、写入图像-imread-imshow-imwrite-waitkey" aria-hidden="true">#</a> OpenCV-Python教程：读取图像、显示、写入图像(imread,imshow,imwrite,waitKey)</h1><h2 id="imread-读取图片" tabindex="-1"><a class="header-anchor" href="#imread-读取图片" aria-hidden="true">#</a> imread() 读取图片</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> cv2

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;cv2.__version__:&#39;</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>
img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&#39;..\\\\lena2.jpg&#39;</span><span class="token punctuation">)</span>  <span class="token comment">#错误路径</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;img:&#39;</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;type(img):&#39;</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span>

img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&#39;..\\\\1.txt&#39;</span><span class="token punctuation">)</span>  <span class="token comment">#非图片文件</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;img:&#39;</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;type(img):&#39;</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span>

img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&#39;..\\\\lena.jpg&#39;</span><span class="token punctuation">)</span> <span class="token comment">#图片文件，正确路径</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;img:&#39;</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;type(img):&#39;</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>cv2<span class="token punctuation">.</span>__version__<span class="token punctuation">:</span> <span class="token number">4.5</span><span class="token number">.2</span>
img<span class="token punctuation">:</span> <span class="token boolean">None</span>
<span class="token builtin">type</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">&#39;NoneType&#39;</span><span class="token operator">&gt;</span>  <span class="token comment">#错误路径</span>
img<span class="token punctuation">:</span> <span class="token boolean">None</span>
<span class="token builtin">type</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">&#39;NoneType&#39;</span><span class="token operator">&gt;</span>  <span class="token comment">#非图片文件</span>
img<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">128</span> <span class="token number">138</span> <span class="token number">225</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">127</span> <span class="token number">137</span> <span class="token number">224</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">126</span> <span class="token number">136</span> <span class="token number">224</span><span class="token punctuation">]</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">[</span> <span class="token number">81</span>  <span class="token number">68</span> <span class="token number">176</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">81</span>  <span class="token number">72</span> <span class="token number">183</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">84</span>  <span class="token number">74</span> <span class="token number">188</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token builtin">type</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">&#39;numpy.ndarray&#39;</span><span class="token operator">&gt;</span> <span class="token comment">#图片文件，正确路径</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>另外读取图像还可以在第2个位置参数写入如下3种模式：</p><table><thead><tr><th>参数名</th><th>描述</th></tr></thead><tbody><tr><td>cv2.IMREAD_COLOR</td><td>缺省方式，读取图像为BGR 8-bit 格式.</td></tr><tr><td>cv2.IMREAD_UNCHANGED</td><td>图像格式不做任何改变，可用在读取带alpha通道的图片</td></tr><tr><td>cv2.IMREAD_GRAYSCALE</td><td>读取图像为转换为灰度图</td></tr></tbody></table><p>下面这个例子从3张图片中按照IMREAD_UNCHANGED模式读取，通过返回numpy数组的shape属性可以看到不同的3张图片的通道数的差异：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> cv2
img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&#39;..\\\\lena.jpg&#39;</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_UNCHANGED<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;img.shape:&#39;</span><span class="token punctuation">,</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
img2 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&#39;..\\\\opencv-logo.png&#39;</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_UNCHANGED <span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;img2.shape:&#39;</span><span class="token punctuation">,</span>img2<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
img3 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&#39;..\\\\left05.jpg&#39;</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_UNCHANGED <span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;img3.shape:&#39;</span><span class="token punctuation">,</span>img3<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>需要注意的是图像的宽度是width=cols=img.shape[1]，高度height=rows=img.shape[0]。</p></blockquote><ol start="2"><li>imshow()显示图像 imshow()可以用来显示图片，第1个参数为显示窗口名称，第2个参数是imread()等方法生成的图像实例。</li></ol><p>为了观察显示效果，一般需要配合waitKey()使用，waitKey()传入的参数如果为0，会无限等待直到任何按键按下，或者传入其他数值参数表示等待时长，单位为ms，时长结束后显示图像窗口会关闭。</p><p>下面这个例子中增加了读出图像的判断，如果获取图像为None则退出，如果获取图像成功才显示。</p><p>这个例子中waitKey()入参使用了0和5000，第1次的0表示无限等待，直到按键按下，第2次表示等待5000ms后显示窗口自动关闭。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token keyword">import</span> cv2
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;cv2.__version__:&#39;</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>

img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&#39;..\\\\lena.jpg&#39;</span><span class="token punctuation">)</span>
<span class="token comment">#print(&#39;img:&#39;,img)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;type(img):&#39;</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> img <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;读出的图像为空&#39;</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">&#39;lena&#39;</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">&#39;lena2&#39;</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>除了前面用imshow()显示图像，还可以通过resizeWindow()等函数调整窗口大小再显示图像，如果显示的图像太多，还可以使用destroyWindow()销毁显示窗口。</p></blockquote>`,16),o=[e];function c(i,l){return s(),a("div",null,o)}const k=n(t,[["render",c],["__file","OpenCv01.html.vue"]]);export{k as default};
